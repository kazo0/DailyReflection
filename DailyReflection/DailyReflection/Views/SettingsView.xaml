<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
			 xmlns:converters="clr-namespace:DailyReflection.Converters"
             x:Class="DailyReflection.Views.SettingsView"
			 Title="Settings">
	<ContentPage.Resources>
		<converters:DateTimeToTimeSpanConverter x:Key="DateTimeToTimeSpan" />
		<converters:TimePickerLabelEnabledConverter x:Key="TimePickerLabelEnabled"/>
	</ContentPage.Resources>
	<TableView Intent="Settings">
		<TableRoot>
			<TableSection Title="Daily Notifications">
				<SwitchCell Text="Enable Notifications" On="{Binding NotificationsEnabled, Mode=TwoWay}"/>
				<ViewCell IsEnabled="{Binding NotificationsEnabled}" Tapped="ViewCell_Tapped">
					<Grid Margin="20, 0, 0, 0"
						  ColumnDefinitions="*, Auto">
						<Label Style="{StaticResource PickerLabel}" 
							   Text="Time" 
							   VerticalTextAlignment="Center"
							   IsEnabled="{Binding NotificationsEnabled, Converter={StaticResource TimePickerLabelEnabled}}"/>
						<TimePicker Grid.Column="1"
									x:Name="TimePicker"
									IsEnabled="{Binding NotificationsEnabled}"
									Time="{Binding NotificationTime, Mode=TwoWay, Converter={StaticResource DateTimeToTimeSpan}}"/>
					</Grid>
				</ViewCell>
			</TableSection>
			<TableSection Title="Sobriety Time">
				<ViewCell Tapped="Sober_ViewCell_Tapped">
					<Grid Margin="20, 0, 0, 0"
						  ColumnDefinitions="*, Auto">
						<Label Style="{StaticResource PickerLabel}" 
							   Text="Sober Date" 
							   VerticalTextAlignment="Center"/>
						<DatePicker Grid.Column="1"
									x:Name="SoberDatePicker"
									Date="{Binding SoberDate, Mode=TwoWay}"/>
					</Grid>
				</ViewCell>
			</TableSection>
		</TableRoot>
	</TableView>
</ContentPage>